"use strict";(self.webpackChunkai_unlimited_docs=self.webpackChunkai_unlimited_docs||[]).push([[5197],{77692:(e,a,n)=>{n.d(a,{Ay:()=>r,RM:()=>t});var s=n(74848),o=n(28453);const t=[];function i(e){const a={a:"a",admonition:"admonition",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",...(0,o.R)(),...e.components};return(0,s.jsxs)(a.admonition,{type:"note",children:[(0,s.jsx)(a.mdxAdmonitionTitle,{}),(0,s.jsxs)(a.p,{children:["Si tiene alguna pregunta o necesita m\xe1s ayuda, visite nuestro ",(0,s.jsx)(a.a,{href:"https://support.teradata.com/community",children:"foro de la comunidad"})," donde podr\xe1 obtener ayuda e interactuar con otros miembros de la comunidad."]})]})}function r(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},23961:(e,a,n)=>{n.d(a,{Ay:()=>r,RM:()=>t});var s=n(74848),o=n(28453);const t=[];function i(e){const a={a:"a",admonition:"admonition",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",...(0,o.R)(),...e.components};return(0,s.jsxs)(a.admonition,{type:"note",children:[(0,s.jsx)(a.mdxAdmonitionTitle,{}),(0,s.jsxs)(a.p,{children:["Si necesita una instancia de prueba de Vantage, puede obtener una de forma gratuita en ",(0,s.jsx)(a.a,{href:"https://clearscape.teradata.com/sign-in?utm_source=dev_portal&utm_medium=quickstart_tutorial&utm_campaign=quickstarts",children:"https://clearscape.teradata.com"})]})]})}function r(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},28433:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>u});var s=n(74848),o=n(28453),t=n(23961),i=n(77692);const r={id:"nos",sidebar_position:1,author:"Ad\xe1n Tworkiewicz",email:"adam.tworkiewicz@teradata.com",page_last_update:"7 de septiembre de 2021",description:"Teradata Vantage Native Object Storage: lectura y escritura desde/hacia el almacenamiento de objetos, interfaz SQL unificada para Vantage y almacenamiento de objetos.",keywords:["data warehouses","compute storage separation","teradata","vantage","cloud data platform","object storage","business intelligence","enterprise analytics"]},d="Consultar datos almacenados en el almacenamiento de objetos",c={id:"manage-data/nos",title:"Consultar datos almacenados en el almacenamiento de objetos",description:"Teradata Vantage Native Object Storage: lectura y escritura desde/hacia el almacenamiento de objetos, interfaz SQL unificada para Vantage y almacenamiento de objetos.",source:"@site/i18n/es/docusaurus-plugin-content-docs-quickstarts/current/manage-data/nos.md",sourceDirName:"manage-data",slug:"/manage-data/nos",permalink:"/pr-preview/pr-192/es/quickstarts/manage-data/nos",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"nos",sidebar_position:1,author:"Ad\xe1n Tworkiewicz",email:"adam.tworkiewicz@teradata.com",page_last_update:"7 de septiembre de 2021",description:"Teradata Vantage Native Object Storage: lectura y escritura desde/hacia el almacenamiento de objetos, interfaz SQL unificada para Vantage y almacenamiento de objetos.",keywords:["data warehouses","compute storage separation","teradata","vantage","cloud data platform","object storage","business intelligence","enterprise analytics"]},sidebar:"tutorialSidebar",previous:{title:"Ubuntu",permalink:"/pr-preview/pr-192/es/quickstarts/connect-to-vantage/configure-odbc/ubuntu"},next:{title:"Seleccionar la soluci\xf3n de ingesta de datos adecuada para Teradata Vantage",permalink:"/pr-preview/pr-192/es/quickstarts/manage-data/select-the-right-data-ingestion-tools-for-teradata-vantage"}},l={},u=[{value:"Informaci\xf3n general",id:"informaci\xf3n-general",level:2},{value:"Prerrequisitos",id:"prerrequisitos",level:2},...t.RM,{value:"Explorar datos con NOS",id:"explorar-datos-con-nos",level:2},{value:"Consultar datos con NOS",id:"consultar-datos-con-nos",level:2},{value:"Cargar datos desde NOS en Vantage",id:"cargar-datos-desde-nos-en-vantage",level:2},{value:"Acceder a dep\xf3sitos privados",id:"acceder-a-dep\xf3sitos-privados",level:2},{value:"Exportar datos de Vantage al almacenamiento de objetos",id:"exportar-datos-de-vantage-al-almacenamiento-de-objetos",level:2},{value:"Resumen",id:"resumen",level:2},...i.RM];function m(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h1,{id:"consultar-datos-almacenados-en-el-almacenamiento-de-objetos",children:"Consultar datos almacenados en el almacenamiento de objetos"}),"\n",(0,s.jsx)(a.h2,{id:"informaci\xf3n-general",children:"Informaci\xf3n general"}),"\n",(0,s.jsx)(a.p,{children:"Native Object Storage (NOS) es una caracter\xedstica de Vantage que le permite consultar datos almacenados en archivos en almacenamiento de objetos como AWS S3, Google GCS, Azure Blob o implementaciones locales. Es \xfatil en escenarios en los que desea explorar datos sin crear una canalizaci\xf3n de datos para incorporarlos a Vantage."}),"\n",(0,s.jsx)(a.h2,{id:"prerrequisitos",children:"Prerrequisitos"}),"\n",(0,s.jsx)(a.p,{children:"Necesita acceso a una instancia de Teradata Vantage. NOS est\xe1 habilitado en todas las ediciones de Vantage, desde Vantage Express hasta Developer, DYI y Vantage as a Service a partir de la versi\xf3n 17.10."}),"\n",(0,s.jsx)(t.Ay,{}),"\n",(0,s.jsx)(a.h2,{id:"explorar-datos-con-nos",children:"Explorar datos con NOS"}),"\n",(0,s.jsx)(a.admonition,{type:"note",children:(0,s.jsx)(a.p,{children:"Actualmente, NOS admite formatos de datos CSV, JSON (como matriz o delimitados por nueva l\xednea) y Parquet."})}),"\n",(0,s.jsxs)(a.p,{children:["Supongamos que tiene un conjunto de datos almacenado como archivos CSV en un dep\xf3sito de S3. Desea explorar el conjunto de datos antes de decidir si desea incorporarlo a Vantage. Para este escenario, utilizaremos un conjunto de datos p\xfablicos publicado por Teradata que contiene datos de flujo de r\xedos recopilados por el\nServicio Geol\xf3gico de EE.\xa0UU. El dep\xf3sito est\xe1 en ",(0,s.jsx)(a.a,{href:"https://td-usgs-public.s3.amazonaws.com/",children:"https://td-usgs-public.s3.amazonaws.com/"}),"."]}),"\n",(0,s.jsx)(a.p,{children:"Primero echemos un vistazo a los datos CSV de muestra. Tomamos las primeras 10 filas que Vantage recuperar\xe1 del dep\xf3sito:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT\n  TOP 10 *\nFROM (\n\tLOCATION='/s3/td-usgs-public.s3.amazonaws.com/CSVDATA/'\n) AS d;\n"})}),"\n",(0,s.jsx)(a.p,{children:"Esto es lo que tengo:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"GageHeight2  Flow   site_no   datetime             Precipitation  GageHeight\n-----------  ------ --------  -------------------  -------------  ----------\n10.9         15300  09380000  2018-06-28 00:30     671            9.80\n10.8         14500  09380000  2018-06-28 01:00     673            9.64\n10.7         14100  09380000  2018-06-28 01:15     672            9.56\n11.0         16200  09380000  2018-06-27 00:00     669            9.97\n10.9         15700  09380000  2018-06-27 00:30     668            9.88\n10.8         15400  09380000  2018-06-27 00:45     672            9.82\n10.8         15100  09380000  2018-06-27 01:00     672            9.77\n10.8         14700  09380000  2018-06-27 01:15     672            9.68\n10.9         16000  09380000  2018-06-27 00:15     668            9.93\n10.8         14900  09380000  2018-06-28 00:45     672            9.72\n"})}),"\n",(0,s.jsx)(a.p,{children:"Tenemos muchos n\xfameros, pero \xbfqu\xe9 significan? Para responder a esta pregunta, le pediremos a Vantage que detecte el esquema de los archivos CSV:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT\n  *\nFROM (\n\tLOCATION='/s3/td-usgs-public.s3.amazonaws.com/CSVDATA/'\n\tRETURNTYPE='NOSREAD_SCHEMA'\n) AS d;\n"})}),"\n",(0,s.jsx)(a.p,{children:"Vantage ahora obtendr\xe1 una muestra de datos para analizar el esquema y devolver\xe1 los resultados:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"Name            Datatype                            FileType  Location\n--------------- ----------------------------------- --------- -------------------------------------------------------------------\nGageHeight2     decimal(3,2)                        csv       /S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09513780/2018/06/27.csv\nFlow            decimal(3,2)                        csv       /S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09513780/2018/06/27.csv\nsite_no         int                                 csv       /S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09513780/2018/06/27.csv\ndatetime        TIMESTAMP(0) FORMAT'Y4-MM-DDBHH:MI' csv       /S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09513780/2018/06/27.csv\nPrecipitation   decimal(3,2)                        csv       /S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09513780/2018/06/27.csv\nGageHeight      decimal(3,2)                        csv       /S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09513780/2018/06/27.csv\n"})}),"\n",(0,s.jsx)(a.p,{children:"Vemos que los archivos CSV tienen 6 columnas. Para cada columna, obtenemos el nombre, el tipo de datos y las coordenadas del archivo que se utilizaron para inferir el esquema."}),"\n",(0,s.jsx)(a.h2,{id:"consultar-datos-con-nos",children:"Consultar datos con NOS"}),"\n",(0,s.jsx)(a.p,{children:"Ahora que conocemos el esquema, podemos trabajar con el conjunto de datos como si fuera una tabla SQL normal. Para demostrarlo, intentemos agregar algunos datos. Obtengamos una temperatura promedio por sitio para los sitios que recopilan temperaturas."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT\n  site_no Site_no, AVG(Flow) Avg_Flow\nFROM (\n  LOCATION='/s3/td-usgs-public.s3.amazonaws.com/CSVDATA/'\n) AS d\nGROUP BY\n  site_no\nHAVING\n  Avg_Flow IS NOT NULL;\n"})}),"\n",(0,s.jsx)(a.p,{children:"Resultado:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"Site_no  Avg_Flow\n-------- ---------\n09380000 11\n09423560 73\n09424900 93\n09429070 81\n"})}),"\n",(0,s.jsx)(a.p,{children:"Para registrar su actividad exploratoria ad hoc como fuente permanente, cr\xe9ela como una tabla externa:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"-- If you are running this sample as dbc user you will not have permissions\n-- to create a table in dbc database. Instead, create a new database and use\n-- the newly create database to create a foreign table.\n\nCREATE DATABASE Riverflow\n  AS PERMANENT = 60e6, -- 60MB\n  SPOOL = 120e6; -- 120MB\n\n-- change current database to Riverflow\nDATABASE Riverflow;\n\nCREATE FOREIGN TABLE riverflow\n  USING ( LOCATION('/s3/td-usgs-public.s3.amazonaws.com/CSVDATA/') );\n\nSELECT top 10 * FROM riverflow;\n"})}),"\n",(0,s.jsx)(a.p,{children:"Resultado:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"Location                                                            GageHeight2 Flow site_no datetime            Precipitation GageHeight\n------------------------------------------------------------------- ----------- ---- ------- ------------------- ------------- ----------\n/S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09429070/2018/07/02.csv null        null 9429070 2018-07-02 14:40:00 1.21          null\n/S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09400815/2018/07/10.csv null        0.00 9400815 2018-07-10 00:30:00 0.00          -0.01\n/S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09400815/2018/07/10.csv null        0.00 9400815 2018-07-10 00:45:00 0.00          -0.01\n/S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09400815/2018/07/10.csv null        0.00 9400815 2018-07-10 01:00:00 0.00          -0.01\n/S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09400815/2018/07/10.csv null        0.00 9400815 2018-07-10 00:15:00 0.00          -0.01\n/S3/s3.amazonaws.com/td-usgs-public/CSVDATA/09429070/2018/07/02.csv null        null 9429070 2018-07-02 14:38:00 1.06          null\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Esta vez, la declaraci\xf3n ",(0,s.jsx)(a.code,{children:"SELECT"})," parece una selecci\xf3n normal en una tabla de la base de datos. Si necesita un tiempo de respuesta inferior a un segundo al consultar los datos, existe una manera sencilla de llevar los datos CSV a Vantage para acelerar las cosas. Siga leyendo para descubrir c\xf3mo."]}),"\n",(0,s.jsx)(a.h2,{id:"cargar-datos-desde-nos-en-vantage",children:"Cargar datos desde NOS en Vantage"}),"\n",(0,s.jsxs)(a.p,{children:["Consultar el almacenamiento de objetos lleva tiempo. \xbfQu\xe9 pasar\xeda si decidiera que los datos parecen interesantes y desea realizar m\xe1s an\xe1lisis con una soluci\xf3n que le brinde respuestas m\xe1s r\xe1pidas? La buena noticia es que los datos devueltos con NOS se pueden utilizar como fuente para declaraciones ",(0,s.jsx)(a.code,{children:"CREATE TABLE"}),". Suponiendo que tenga el privilegio ",(0,s.jsx)(a.code,{children:"CREATE TABLE"}),", podr\xe1 ejecutar:"]}),"\n",(0,s.jsxs)(a.p,{children:["IMPORTANT: Esta consulta supone que cre\xf3 la base de datos ",(0,s.jsx)(a.code,{children:"Riverflow"})," y una tabla externa llamada ",(0,s.jsx)(a.code,{children:"riverflow"})," en el paso anterior."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"-- This query assumes you created database `Riverflow`\n-- and a foreign table called `riverflow` in the previous step.\n\nCREATE MULTISET TABLE riverflow_native (site_no, Flow, GageHeight, datetime)\nAS (\n  SELECT site_no, Flow, GageHeight, datetime FROM riverflow\n) WITH DATA\nNO PRIMARY INDEX;\n\nSELECT TOP 10 * FROM riverflow_native;\n"})}),"\n",(0,s.jsx)(a.p,{children:"Resultado:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"site_no   Flow  GageHeight  datetime\n-------  -----  ----------  -------------------\n9400815    .00        -.01  2018-07-10 00:30:00\n9400815    .00        -.01  2018-07-10 01:00:00\n9400815    .00        -.01  2018-07-10 01:15:00\n9400815    .00        -.01  2018-07-10 01:30:00\n9400815    .00        -.01  2018-07-10 02:00:00\n9400815    .00        -.01  2018-07-10 02:15:00\n9400815    .00        -.01  2018-07-10 01:45:00\n9400815    .00        -.01  2018-07-10 00:45:00\n9400815    .00        -.01  2018-07-10 00:15:00\n9400815    .00        -.01  2018-07-10 00:00:00\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Esta vez, la consulta ",(0,s.jsx)(a.code,{children:"SELECT"})," regres\xf3 en menos de un segundo. Vantage no tuvo que buscar los datos de NOS. En cambio, respondi\xf3 utilizando datos que ya estaban en sus nodos."]}),"\n",(0,s.jsx)(a.h2,{id:"acceder-a-dep\xf3sitos-privados",children:"Acceder a dep\xf3sitos privados"}),"\n",(0,s.jsx)(a.p,{children:"Hasta ahora, hemos utilizado un dep\xf3sito p\xfablico. \xbfQu\xe9 pasa si tiene un dep\xf3sito privado? \xbfC\xf3mo le dice a Vantage qu\xe9 credenciales debe usar?"}),"\n",(0,s.jsx)(a.p,{children:"Es posible insertar sus credenciales directamente en su consulta:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:'SELECT\n  TOP 10 *\nFROM (\n  LOCATION=\'/s3/td-usgs-public.s3.amazonaws.com/CSVDATA/\'\n  AUTHORIZATION=\'{"ACCESS_ID":"","ACCESS_KEY":""}\'\n) AS d;\n'})}),"\n",(0,s.jsx)(a.p,{children:"Ingresar estas credenciales todo el tiempo puede resultar tedioso y menos seguro. En Vantage, puede crear un objeto de autorizaci\xf3n que servir\xe1 como contenedor para sus credenciales:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE AUTHORIZATION aws_authorization\n  USER 'YOUR-ACCESS-KEY-ID'\n  PASSWORD 'YOUR-SECRET-ACCESS-KEY';\n"})}),"\n",(0,s.jsx)(a.p,{children:"Luego puede hacer referencia a su objeto de autorizaci\xf3n cuando cree una tabla externa:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE FOREIGN TABLE riverflow\n, EXTERNAL SECURITY aws_authorization\nUSING ( LOCATION('/s3/td-usgs-public.s3.amazonaws.com/CSVDATA/') );\n"})}),"\n",(0,s.jsx)(a.h2,{id:"exportar-datos-de-vantage-al-almacenamiento-de-objetos",children:"Exportar datos de Vantage al almacenamiento de objetos"}),"\n",(0,s.jsx)(a.p,{children:'Hasta ahora hemos hablado de leer e importar datos desde el almacenamiento de objetos. \xbfNo estar\xeda bien si tuvi\xe9ramos una manera de usar SQL para exportar datos desde Vantage al almacenamiento de objetos? Esto es exactamente para lo que sirve la funci\xf3n "WRITE_NOS". Digamos que queremos exportar datos de la tabla "riverflow_native" al almacenamiento de objetos. Puede hacerlo con la siguiente consulta:'}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT * FROM WRITE_NOS (\n  ON ( SELECT * FROM riverflow_native )\n  PARTITION BY site_no ORDER BY site_no\n  USING\n    LOCATION('YOUR-OBJECT-STORE-URI')\n    AUTHORIZATION(aws_authorization)\n    STOREDAS('PARQUET')\n    COMPRESSION('SNAPPY')\n    NAMING('RANGE')\n    INCLUDE_ORDERING('TRUE')\n) AS d;\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Aqu\xed, le indicamos a Vantage que tome datos de ",(0,s.jsx)(a.code,{children:"riverflow_native"})," y los guarde en el dep\xf3sito ",(0,s.jsx)(a.code,{children:"YOUR-OBJECT-STORE-URI"})," usando el formato ",(0,s.jsx)(a.code,{children:"parquet"}),". Los datos se dividir\xe1n en archivos seg\xfan el atributo ",(0,s.jsx)(a.code,{children:"site_no"}),". Los archivos se comprimir\xe1n."]}),"\n",(0,s.jsx)(a.h2,{id:"resumen",children:"Resumen"}),"\n",(0,s.jsx)(a.p,{children:"En este inicio r\xe1pido, hemos aprendido c\xf3mo leer datos del almacenamiento de objetos utilizando la funcionalidad Native Object Storage (NOS) en Vantage. NOS admite la lectura e importaci\xf3n de datos almacenados en formatos CSV, JSON y Parquet. NOS tambi\xe9n puede exportar datos desde Vantage al almacenamiento de objetos."}),"\n",(0,s.jsx)(a.h1,{id:"lectura-adicional",children:"Lectura adicional"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsx)(a.li,{children:(0,s.jsx)(a.a,{href:"https://docs.teradata.com/r/2mw8ooFr~xX0EaaGFaDW8A/root",children:"Teradata Vantage\u2122: Gu\xeda de introducci\xf3n a Native Object Storage"})}),"\n"]}),"\n",(0,s.jsx)(i.Ay,{})]})}function p(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>r});var s=n(96540);const o={},t=s.createContext(o);function i(e){const a=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(t.Provider,{value:a},e.children)}}}]);